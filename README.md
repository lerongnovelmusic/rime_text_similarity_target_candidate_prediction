# rime_text_similarity_target_candidate_prediction

**é€šè¿‡ä¸Šä¸‹æ–‡æ™ºèƒ½æ’åºç”¨æˆ·æ‰€éœ€å€™é€‰è¯æ’ä»¶**  
An approach, in Chinese keyboard, to predict and rank user's possible target candidate in candidate list in rime, by using a BERT model.
è¿™æ˜¯ä¸€ä¸ªåŸºäºBERTæ¨¡å‹ï¼Œåœ¨ä¸­æ–‡è¾“å…¥æ³•ç¯å¢ƒä¸‹é¢„æµ‹å¹¶æ’åºç”¨æˆ·æœ€å¯èƒ½æƒ³è¦çš„å€™é€‰è¯çš„ä¸€ä¸ªrimeè¾“å…¥æ³•åŠŸèƒ½ã€‚


ç”±æœ¬äººå’Œ [XYKK05](https://github.com/XYKK05) å…±åŒå¼€å‘ã€‚  
æ„Ÿè°¢hchunhuiå¤„æ‹¿æ¥çš„json.luaæ–‡ä»¶(è¿™ä¸ªæ–‡ä»¶æ˜¯å¼€æºçš„ï¼Œé¡¹ç›®åœ°å€https://github.com/hchunhui/librime-cloud)
ä»¥åŠæ„Ÿè°¢3q-uå¤§ä½¬å¤„æ‹¿æ¥çš„simplehttp.dllæ–‡ä»¶(é¡¹ç›®åœ°å€ï¼šhttps://github.com/3q-u/rime-trans)

> âš ï¸ ç›®å‰è¿˜å¾ˆä¸å®Œå–„ï¼Œé¢„æµ‹æ•ˆæœå¯ä»¥è¯´å¾ˆç³Ÿç³•ï¼Œè€Œä¸”æ™ºèƒ½æ’åºæ—¶ä¼šæœ‰å¡é¡¿æ„Ÿ(è¿™é‡Œè¯´ä¸€å¥æŠ±æ­‰ï¼)ï¼Œä¼šç»§ç»­ä¼˜åŒ–~

---

## åŠŸèƒ½ç‰¹ç‚¹
ç”¨æˆ·æ•²ä¸‹æ‹¼éŸ³åï¼ŒæŒ‰ä¸‹é”®ç›˜ä¸Šçš„"~"é”®ï¼Œå€™é€‰è¯ä»¬ä¼šè¢«æŒ‰ç…§ç”¨æˆ·å†å²è¾“å…¥çš„50ä¸ªæ–‡å­—çš„ä¸Šä¸‹æ–‡ï¼Œå¯¹ç°åœ¨æ‹¼éŸ³æ‰€å¯¹åº”çš„å€™é€‰è¯è¿›è¡Œé‡æ–°æ’åºã€‚ç›®çš„æ˜¯è®©ç”¨æˆ·éœ€è¦çš„è¯æ’åœ¨æœ€å‰é¢ï¼Œè€Œä¸å—ä¼ ç»Ÿçš„è¯é¢‘æƒé‡æ’åºçš„å›°æ‰°(æ¯”å¦‚æ˜¯æ—¶äº‹å¼ï¼Œçš„åœ°å¾—ï¼ŒåŒ…å­è±¹å­ï¼Œç”Ÿæ´»ç”Ÿç«â€¦â€¦)ã€‚æ³¨æ„ç°é˜¶æ®µè§¦å‘æ™ºèƒ½æ’åºåï¼Œå€™é€‰è¯æ å°†ä¸ä¼šæ˜¾ç¤ºç”Ÿåƒ»å­—å’Œå«æœ‰ç”Ÿåƒ»å­—çš„è¯ã€‚ 

ğŸ“Œ **æ³¨æ„**ï¼š  
æœ¬åŠŸèƒ½åœ¨rimeçš„reduce_english_filter.luaæ–‡ä»¶ä¸Šç›´æ¥ä¿®æ”¹å¾—æ¥ï¼Œè¿™ä¸ªluaæ–‡ä»¶åŸæœ¬çš„åŠŸèƒ½å·²ç»è¢«ç§»é™¤ã€‚æ‰€ä»¥å¦‚æœå®¢å®˜éœ€è¦ä¿ç•™åŸreduce_english_filter.luaåœ°åŠŸèƒ½ï¼Œå¯èƒ½éœ€è¦è‡ªå·±è°ƒæ•´schema.yamlæ–‡ä»¶æ¥é€‚é…ï¼Œä¸‡åˆ†æŠ±æ­‰QWQã€‚ 

---

## æ–‡ä»¶è¯´æ˜
- `rime_recent_chars.txt`ï¼šè®°å½•ç”¨æˆ·æœ€è¿‘è¾“å…¥çš„30ä¸ªå­—ç¬¦ã€‚  
- `candidates_weight.txt`ï¼šå­˜å‚¨å€™é€‰è¯çš„ç›¸ä¼¼åº¦æ•°å€¼ã€‚  
- `rime_personal_debug_log.txt`ï¼šé¢„ç•™è°ƒè¯•æ—¥å¿—æ–‡ä»¶ï¼ˆæš‚æœªä½¿ç”¨ï¼‰ã€‚  

---

## å®‰è£…æ–¹æ³•
1. **å¤åˆ¶æ–‡ä»¶**ï¼š  
   - å°†ä»¥ä¸‹æ–‡ä»¶æ”¾å…¥ Rime ç”¨æˆ·æ–‡ä»¶å¤¹çš„ `lua` ç›®å½•ï¼ˆè¦†ç›–åŸæœ‰æ–‡ä»¶ï¼‰ï¼š  
     ```
     reduce_english_filter.lua  
     select_character.lua  
     local_translation_server.py  
     json.lua
     ```
   - å°†ä»¥ä¸‹æ–‡ä»¶æ”¾å…¥ Rime ç”¨æˆ·æ–‡ä»¶å¤¹æ ¹ç›®å½•ï¼š  
     ```
     rime_recent_chars.txt  
     rime_personal_debug_log.txt  
     candidates_weight.txt
     ```
   - å°† `simplehttp.dll` æ”¾å…¥å°ç‹¼æ¯«ç¨‹åºæ–‡ä»¶å¤¹ã€‚

2. **ä¸‹è½½æ¨¡å‹**ï¼š  
   ä» [HuggingFace](https://huggingface.co/uer/chinese_roberta_L-12_H-512/tree/main) ä¸‹è½½ BERT æ¨¡å‹ï¼Œè§£å‹åä¼šæ˜¯å«â€œChinese_roberta_L-12_H-512â€çš„æ–‡ä»¶å¤¹ã€‚

3. **é…ç½®è·¯å¾„**ï¼š  
   æ‰“å¼€local_translation_server.py, select_character.lua, æœç´¢æ³¨é‡Šâ€œæ”¹ä¸ºè¿™ä¸ªæ–‡ä»¶åœ¨ä½ ç”µè„‘é‡Œçš„åœ°å€â€ï¼Œç„¶ååœ¨å¯¹åº”çš„è¡Œé‡Œä¿®æ”¹å®ƒä»¬ä½¿ç”¨çš„æ¨¡å‹æ–‡ä»¶å¤¹å’Œtxtæ–‡ä»¶çš„è·¯å¾„ã€‚

4. **è¿è¡ŒæœåŠ¡**ï¼š  
   - è¿è¡Œlocal_translation_server.pyï¼Œåº”è¯¥ä¼šæç¤ºç¼ºå°‘ä¸€äº›åº“ï¼Œå®‰è£…åº“å³å¯ï¼Œæ¨èå¤šç”¨ä¸åŒçš„é•œåƒï¼Œæ¸…åå•Šï¼Œé˜¿é‡Œå•Šéƒ½è¯•è¯•ã€‚local_translation_server.pyè¦è¿è¡ŒæˆåŠŸ
  
5. **é‡æ–°éƒ¨ç½²rime**ï¼š
   - é‡æ–°éƒ¨ç½²rimeå³å¯
     
> â­ ä»¥åï¼Œå¦‚æœæƒ³è¦å¼€å¯æ™ºèƒ½æ’åºåŠŸèƒ½ï¼Œåªè¦ç¡®ä¿local_translation_server.pyåœ¨ç”µè„‘åå°è¿è¡Œç€å°±OKå•¦~
---

## è‡´è°¢
- [3q-u/rime-trans](https://github.com/3q-u/rime-trans)  
- [hchunhui/librime-cloud](https://github.com/hchunhui/librime-cloud)  
- å…±åŒå¼€å‘è€… [XYKK05](https://github.com/XYKK05)  

---

## è®¸å¯è¯
æœ¬é¡¹ç›®éµå¾ªå¼€æºåè®®ï¼Œæ¬¢è¿è´¡çŒ®å’Œæ”¹è¿›ï¼
